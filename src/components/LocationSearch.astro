---
interface QuickZone {
    name: string;
    zona: string;
    lat: string;
    lon: string;
    tz: string;
}

interface Props {
    quickZones?: QuickZone[];
}

const defaultQuickZones: QuickZone[] = [
    { name: "New York", zona: "new-york", lat: "40.7128", lon: "-74.0060", tz: "America/New_York" },
    { name: "Los Angeles", zona: "los-angeles", lat: "34.0522", lon: "-118.2437", tz: "America/Los_Angeles" },
    { name: "Chicago", zona: "chicago", lat: "41.8781", lon: "-87.6298", tz: "America/Chicago" },
    { name: "Miami", zona: "miami", lat: "25.7617", lon: "-80.1918", tz: "America/New_York" },
    { name: "Seattle", zona: "seattle", lat: "47.6062", lon: "-122.3321", tz: "America/Los_Angeles" },
];

const { quickZones = defaultQuickZones } = Astro.props;
---

<div class="flex flex-col relative location-container">
    <label class="font-semibold mb-2 text-gray-700 flex items-center gap-2">
        <span>üìç</span> Location
    </label>
    <div class="flex gap-2">
        <input 
            type="text" 
            id="location-search" 
            placeholder="Search any city..."
            class="flex-1 py-3 px-4 text-base border-2 border-gray-200 rounded-lg transition-all focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100"
        >
        <button 
            type="button" 
            id="btnSearchLocation"
            class="py-3 px-5 bg-gradient-to-br from-indigo-500 to-purple-600 text-white border-none rounded-lg cursor-pointer font-semibold transition-all hover:-translate-y-0.5 hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
        >
            üîç
        </button>
    </div>
    <div id="location-results" class="location-results hidden absolute top-full left-0 right-0 bg-white border-2 border-indigo-500 border-t-0 rounded-b-lg max-h-72 overflow-y-auto z-50 shadow-xl"></div>
    
    <div id="location-selected" class="hidden items-center gap-3 py-2 px-4 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-lg mt-2">
        <div class="flex-1">
            <div id="location-name" class="font-semibold text-gray-800"></div>
            <div id="location-coords" class="text-sm text-gray-500"></div>
        </div>
        <button 
            type="button" 
            id="btnClearLocation"
            class="bg-red-500 hover:bg-red-600 text-white border-none py-1 px-3 rounded cursor-pointer text-sm"
        >
            ‚úï
        </button>
    </div>
    
    <div class="flex gap-2 flex-wrap mt-3">
        <span class="text-sm text-gray-500">Quick access:</span>
        {quickZones.map((zone) => (
            <button 
                type="button" 
                class="quick-zone py-1.5 px-3 bg-gray-100 border-none rounded-full cursor-pointer text-sm transition-all hover:bg-gradient-to-br hover:from-indigo-500 hover:to-purple-600 hover:text-white" 
                data-zona={zone.zona} 
                data-lat={zone.lat} 
                data-lon={zone.lon} 
                data-tz={zone.tz}
            >
                {zone.name}
            </button>
        ))}
    </div>
    
    <!-- Hidden fields for location data -->
    <input type="hidden" id="zona" value="">
    <input type="hidden" id="lat" value="">
    <input type="hidden" id="lon" value="">
    <input type="hidden" id="tz" value="">
</div>
